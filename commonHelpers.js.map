{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/icon-error.svg","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function getImages(userData) {\n    try {\n        axios.defaults.baseURL = 'https://pixabay.com/api/';\n        const params = {\n            key: '44328072-f56b95eb73841ff5e619bc345',\n            q: userData,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            per_page: '20',\n            safesearch: false,\n        }    \n        const res = await axios.get('', { params });\n        \n        return res.data;\n    } catch (err) {\n        console.error(err);\n    }\n}","\nfunction createImage({ largeImageURL, webformatURL, tags, comments, downloads, likes, views }) {\n  return `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=${largeImageURL}>\n      <img\n        class=\"gallery-image\"\n        src=${webformatURL}\n        alt=${tags}\n      />\n    </a>\n    <ul class=\"gallery-text\">\n      <li class=\"gallery-text-property\">\n        <p class=\"gallery-text-dscr\">Likes</p>\n        <p class=\"gallery-text-count\">${likes}</p>\n      </li>\n      <li class=\"gallery-text-property\">\n        <p class=\"gallery-text-dscr\">Views</p>\n        <p class=\"gallery-text-count\">${views}</p>\n      </li>\n      <li class=\"gallery-text-property\">\n        <p class=\"gallery-text-dscr\">Comments</p>\n        <p class=\"gallery-text-count\">${comments}</p>\n      </li>\n      <li class=\"gallery-text-property\">\n        <p class=\"gallery-text-dscr\">Downloads</p>\n        <p class=\"gallery-text-count\">${downloads}</p>\n      </li>\n    </ul> \n  </li>`;\n};\n\nexport function createImagesList(data) {\n  const arr = data.hits;\n  return arr.map(createImage).join('');\n};","export default \"__VITE_ASSET__eb775c6f__\"","import { getImages } from \"./js/pixabay-api.js\";\nimport { createImagesList } from \"./js/render-functions.js\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport imageUrl from './img/icon-error.svg';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst moreBtn = document.querySelector('.load-btn');\n\nform.addEventListener('submit', sendUserRequest);\n            \nasync function sendUserRequest(e) {\n    e.preventDefault();\n    \n    const userData = e.target.elements.request.value.trim();\n    if (userData !== '') {       \n        gallery.innerHTML = '';        \n\n        const loader = document.querySelector('.loader');\n        loader.style.display = 'block';\n        moreBtn.classList.remove('is-visible');\n        \n        try {\n            const data = await getImages(userData)\n                if (data.total !== 0) {\n                    const markup = createImagesList(data);\n                    gallery.insertAdjacentHTML('beforeend', markup);\n\n                    const lightbox = new SimpleLightbox('.gallery-item a', {\n                        captions: true,\n                        captionSelector: 'img',\n                        captionType: 'attr',\n                        captionsData: 'alt',\n                        captionPosition: 'bottom',\n                        captionDelay: 250,\n                        animationSpeed: 300,\n                        widthRatio: 1,\n                        heightRatio: 0.95,\n                        disableRightClick: true,\n                    });\n                    lightbox.refresh();\n                    \n                    const imageLoadPromises = Array.from(gallery.querySelectorAll('img')).map(image => new Promise(resolve => {\n                        image.onload = resolve;\n                    }));\n                    await Promise.all(imageLoadPromises);                    \n                } else {\n                    console.log('Sorry, there are no images matching your search query. Please try again!');\n                    iziToast.error({\n                        message: 'Sorry, there are no images matching your search query. Please try again!',\n                        messageSize: '16',\n                        messageLineHeight: '1,5',\n                        messageColor: '#fafafb',\n                        backgroundColor: '#ef4040',\n                        imageWidth: 302,\n                        position: 'topRight',\n                        theme: 'dark',\n                        close: true,\n                        closeOnEscape: true,\n                        closeOnClick: true,\n                        progressBar: true,\n                        progressBarColor: '#b51b1b',\n                        transitionIn: 'fadeInDown',\n                        transitionOut: 'fadeOutUp',\n                        iconUrl: imageUrl,\n                        iconColor: '#fafafb',\n                    });\n                }\n        } catch (err) {\n            console.log(err);            \n        } finally {\n            loader.style.display = 'none';\n            moreBtn.classList.add('is-visible');\n        }  \n        form.reset();\n    } else {\n        console.log('Enter your Request!');\n        iziToast.error({\n                        title: 'Error!',\n                        titleColor: '#fafafb', \n                        message: 'Enter your Request!',\n                        messageSize: '16',\n                        messageColor: '#fafafb',        \n                        backgroundColor: '#ef4040',\n                        imageWidth: 432,\n                        position: 'topRight',\n                        theme: 'dark',\n                        close: true,\n                        closeOnEscape: true,\n                        closeOnClick: true,\n                        progressBar: true,\n                        progressBarColor: '#b51b1b',\n                        transitionIn: 'fadeInDown',\n                        transitionOut: 'fadeOutUp',\n                        iconUrl: imageUrl,\n                        iconColor: '#fafafb',\n                        timeout: 3000,\n        });\n    }\n}\n\n// moreBtn.addEventListener('submit', (e) => {\n//     e.preventDefault();\n//     console.log('Нужны еще фотки!');\n// });\n\n"],"names":["getImages","userData","axios","params","err","createImage","largeImageURL","webformatURL","tags","comments","downloads","likes","views","createImagesList","data","imageUrl","form","gallery","moreBtn","sendUserRequest","e","loader","markup","SimpleLightbox","imageLoadPromises","image","resolve","iziToast"],"mappings":"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"}